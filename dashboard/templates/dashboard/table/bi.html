{% extends 'dashboard/elements/layouts/admin.html' %}

{% load static %}

{% block additional_css %}
{% endblock %}

{% block content %}
        
   
<!-- main -->
<div class="row">
    <div class="col-xl-12 col-md-6">
        <div class="card">
            <div class="card-body">
				<form method="get" name="filter">
					<div class="form-group">
						<label for="service">Service:</label>
						{% for service in services %}
						<input type="checkbox" name="service" id="{{service}}" value="{{service}}">
						<label for="{{service}}">{{service}}</label>
						{% endfor %}
					</div>
					<div class="form-group">
						<label for="kind">Kind:</label>
						{% for k in kind %}
						<input type="checkbox" name="kind" id="{{k}}" value="{{k}}">
						<label for="{{k}}">{{k}}</label>
						{% endfor %}
					</div>
					<div class="form-group">
						<label for="revenue">Revenue:</label>
						{% for r in revenue %}
						<input type="checkbox" name="revenue" id="{{r}}" value="{{r}}">
						<label for="{{r}}">{{r}}</label>
						{% endfor %}
					</div>
					<div class="form-group">
						<label for="cancelled">Cancelled:</label>
						{% for c in cancelled %}
						<input type="checkbox" name="cancelled" id="{{c}}" value="{{c}}">
						<label for="{{c}}">{{c}}</label>
						{% endfor %}
					</div>
				
					<button class="btn btn-dark px-4" type="submit" name="filter">Filter</button>
				</form>
				
				
            </div>	
        </div>
    </div>
</div>

<!-- main -->
<div class="row">
    <div class="col-xl-12 col-md-6">
        <div class="card">
            <div class="card-body">
                <h2>DATA:</h2>
                {% for d in sales %}
                    <p>{{d}} ---> ${{d.change}}</p>
                {% endfor %}	
            </div>	
        </div>
    </div>
</div>

<div class="col-xl-6 col-lg-12 col-sm-12">
	<div class="card">
		<div class="card-header">
			<h4 class="card-title">Basic Bar Chart</h4>
		</div>
		<div class="card-body">
			<canvas id="barChart_1"></canvas>
		</div>
	</div>
</div>



{% endblock %}

{% block additional_js %}

<script>
	(function($) {
		"use strict" 
	
		
		/* function draw() {
			
		} */
	
	 var dzSparkLine = function(){
		let draw = Chart.controllers.line.__super__.draw; //draw shadow
		
		var screenWidth = $(window).width();
		
		var barChart1 = function(){
			if(jQuery('#barChart_1').length > 0 ){
				const barChart_1 = document.getElementById("barChart_1").getContext('2d');
		
				barChart_1.height = 100;
	
				new Chart(barChart_1, {
					type: 'bar',
					data: {
						defaultFontFamily: 'Poppins',
						labels: [{% for label in labels %} "{{ label }}"{% if not forloop.last %}, {% endif %}{% endfor %}],
						datasets: [
						{
							label: "Total amount",
							data: [{% for amount in total_amounts %} 
								{% if amount == 0 %} 
									0.1{% if not forloop.last %}, {% endif %}
								{% else %} 
									{{ amount }}{% if not forloop.last %}, {% endif %}
								{% endif %}{% endfor %}],
							borderColor: 'rgba(235, 129, 83, 1)',
							borderWidth: "0",
							backgroundColor: 'rgba(235, 129, 83, 1)'
						}
					]

					},
					options: {
						legend: false, 
						scales: {
							yAxes: [{
								ticks: {
									beginAtZero: true
								}
							}],
							xAxes: [{
								// Change here
								barPercentage: 0.5
							}]
						}
					}
				});
			}
		}
	
	
	
		/* Function ============ */
		return {
			init:function(){
			},
			
			
			load:function(){
				barChart1();	
			},
			
			resize:function(){
				// barChart1();
			}
		}
	
	}();
	
	
		
	jQuery(window).on('load',function(){
		dzSparkLine.load();
	});
	
	jQuery(window).on('resize',function(){
		//dzSparkLine.resize();
		setTimeout(function(){ dzSparkLine.resize(); }, 1000);
	});
		
	})(jQuery);
</script>

{% endblock %}
